<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DetailPlanMapper">

	<!-- 여행기 쓰기 여행블럭 정보 불러오기 -->
	<select id="selectPlannerDetail" resultType="CommunityDetailResponse"
		parameterType="int">
		SELECT TP.TRAVEL_PLAN_NO, TP.MEMBER_NO,
		TRAVEL_PLAN_TITLE, START_YMD, END_YMD,
		DP.DETAIL_PLAN_NO, DETAIL_PLAN_YMD, DETAIL_PLAN_HOUR, DETAIL_PLAN_DATE,
		COLOR, BLOCK_ORD, PL.PLACE_NO, PLACE_CATEGORY, PLACE_NAME, ROAD_NAME_ADR,
		LOT_NUMBER_ADR, LONGITUDE, LATITUDE, SCORE,
		PR.PLACE_REVIEW_NO, PLACE_REVIEW_IMG, PLACE_REVIEW_CONTENT, PLACE_REVIEW_SCORE,
		WRITE_DATE
		FROM TRAVEL_PLAN_TB TP
		LEFT JOIN DETAIL_PLAN_TB DP ON TP.TRAVEL_PLAN_NO = DP.TRAVEL_PLAN_NO
		LEFT JOIN DETAIL_PLAN_BLOCK_TB DB ON DP.DETAIL_PLAN_NO = DB.DETAIL_PLAN_NO
		LEFT JOIN PLACE_TB PL ON DP.PLACE_NO = PL.PLACE_NO
		LEFT JOIN PLACE_REVIEW_TB PR ON DP.DETAIL_PLAN_NO = PR.DETAIL_PLAN_NO
		WHERE TP.TRAVEL_PLAN_NO = #{TRAVEL_PLAN_NO}
		ORDER BY TP.MEMBER_NO, DP.DETAIL_PLAN_YMD, DETAIL_PLAN_HOUR
	</select>

</mapper>