<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WeatherMapper">

	<select id="getSecondPrecinctData" resultType="Second_precinct_tb_DTO">
		select SECOND_PRECINCT_NO,SECOND_PRECINCT,FIRST_PRECINCT_NO,SECOND_PRECINCT_CD,LAT,LON,nx,ny
		from SECOND_PRECINCT_TB
		order by SECOND_PRECINCT_NO
	</select>
	
	<select id="getFirstPrecinctData" resultType="First_precinct_tb_DTO">
		select FIRST_PRECINCT_NO,FIRST_PRECINCT_CD 
		from FIRST_PRECINCT_TB
		order by FIRST_PRECINCT_NO
	</select>


 <!-- insertAnnounceData -->
    <insert id="insertAnnounceData" parameterType="ShortTermAnnounceDTO" >
        INSERT INTO SHORT_TERM_ANNOUNCE_TB (IDX,ANNOUNCE_DAY, ANNOUNCE_TIME)
        VALUES (SHORT_TERM_ANNOUNCE_IDX.NEXTVAL, #{ANNOUNCE_DAY}, #{ANNOUNCE_TIME})
    </insert>

    <!-- insertForecastData -->
    <insert id="insertForecastData" parameterType="ShortTermForecastDTO" >
        INSERT INTO SHORT_TERM_FORECAST_TB (SHORT_TERM_FORECAST_NO, IDX, SECOND_PRECINCT_NO, FORECAST_DAY, FORECAST_TIME, TMP, PTY, POP, REH, PCP, SKY, WSD, WAV)
        VALUES (SHORT_TERM_FORECAST_SEQ.NEXTVAL, SHORT_TERM_ANNOUNCE_IDX.CURRVAL, #{SECOND_PRECINCT_NO}, #{FORECAST_DAY}, #{FORECAST_TIME}, #{TMP}, #{PTY}, #{POP}, #{REH}, #{PCP}, #{SKY}, #{WSD}, #{WAV})
    </insert>

		 <!-- 발표 시각 조회 -->
    <select id="findAll" resultType="ShortTermAnnounceDTO">
        SELECT IDX,ANNOUNCE_DAY, ANNOUNCE_TIME
        FROM SHORT_TERM_ANNOUNCE_TB
    </select>

	 <!-- 행의 개수 조회 -->
    <select id="countRows" resultType="int">
        SELECT COUNT(*) FROM SHORT_TERM_ANNOUNCE_TB
    </select>

    <!-- IDX 기준으로 정렬된 ID 리스트 조회 -->
    <select id="fetchIdsOrdered" resultType="int">
        SELECT IDX
        FROM SHORT_TERM_ANNOUNCE_TB
        ORDER BY IDX ASC
    </select>

    <!-- IDX 기준으로 행 삭제 -->
    <delete id="deleteById">
        DELETE FROM SHORT_TERM_ANNOUNCE_TB WHERE IDX = #{id}
    </delete>


</mapper>